#!/bin/bash

# Log arguments for debugging
echo "[mock-gh] Called with: $@" >> /tmp/gh-mock.log

if [[ "$1" == "repo" && "$2" == "view" ]]; then
    if [[ "$*" == *"--jq"* ]]; then
        echo ".e2e/upstream"
    else
        echo '{"parent": {"url": ".e2e/upstream"}}'
    fi
elif [[ "$1" == "pr" && "$2" == "create" ]]; then
    echo "https://github.com/mock/repo/pull/1"
elif [[ "$1" == "pr" && "$2" == "merge" ]]; then
    # Simulate merge
    # The workflow does: gh pr merge upstream-sync --auto --merge
    # We should merge upstream-sync into the current branch (which should be main)
    branch=$3
    echo "[mock-gh] Merging $branch..."
    git merge "$branch" --no-edit
else
    echo "Unknown command: $@"
    # Don't fail, just log
fi
